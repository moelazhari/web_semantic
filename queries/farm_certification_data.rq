PREFIX : <http://example.org/organic#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

SELECT ?farm ?farmType ?sample ?pesticide ?value ?certStatus WHERE {
    ?farm :hasSoilSample ?sample .
    ?sample :hasPesticide ?pesticide .
    ?sample :hasValue ?value .
    
    OPTIONAL {
        ?farm rdf:type ?farmType .
        FILTER(?farmType IN (:OrganicFarm, :NonOrganicFarm))
    }
    
    OPTIONAL { ?farm :certificationStatus ?certStatus }
}
ORDER BY ?farm ?sample 